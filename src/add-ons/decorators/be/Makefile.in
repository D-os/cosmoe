
prefix=@prefix@

COPTS   = -Wall -Wno-multichar `cat @top_srcdir@/cosmoe.specs` -I@top_srcdir@/src/servers/app `freetype-config --cflags` -c -O3

CC = @CC@

COSMOELIBDIR = @top_srcdir@/src/kits/objs
DEVBIN = @COSMOESYS@/drivers/appserver/decorators
OBJS =	beishdecorator.o gradient.o
TARGET = be

OBJDIR	:= objs
OBJS	:= $(addprefix $(OBJDIR)/,$(OBJS))


#
#	rules
#

$(OBJDIR)/%.o : %.c
	$(CC) $(COPTS) $< -o $@

$(OBJDIR)/%.o : %.cpp
	$(CC) $(COPTS) $< -o $@


all :	objs $(OBJDIR)/$(TARGET)

objs:
	mkdir objs

$(OBJDIR)/$(TARGET): $(OBJS)
	$(CC) @SHAREDLINK@ $(OBJS) -o $(OBJDIR)/$(TARGET) -L$(COSMOELIBDIR) -lcosmoe -lstdc++

install: $(OBJDIR)/$(TARGET) $(DEVBIN)
	cp -f $(OBJDIR)/$(TARGET) $(DEVBIN)/$(TARGET)

$(DEVBIN):
	mkdir -p $(DEVBIN)

clean:
	-rm $(OBJS) $(OBJDIR)/$(TARGET) *~

distclean: clean
	-rm -f Makefile
